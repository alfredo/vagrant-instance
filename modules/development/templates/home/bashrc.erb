source ~/.common.bash


export WORKON_HOME=/projects/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh

_virtualenvs ()
{
    local cur="${COMP_WORDS[COMP_CWORD]}"
    COMPREPLY=( $(compgen -W "`ls $WORKON_HOME`" -- ${cur}) )
}

complete -o default -o nospace -F _virtualenvs workon
complete -o default -o nospace -F _virtualenvs rmvirtualenv

# Aliases
alias ll="ls -lh"
alias la="ls -a"
alias exit="clear; exit"
alias ls='ls --color=auto'
alias ack=ack-grep

# Environment variables
export LC_ALL=C

export PATH=$PATH:$HOME/bin
export GEM_HOME=$HOME/.gems
export PATH=$PATH:$GEM_HOME/bin

export PATH=$HOME/local/bin:/projects/local-bin:$PATH

export JAVA_HOME=/usr/lib/jvm/java-6-sun

#grails
export GRAILS_HOME=$HOME/projects/packages/grails
export PATH=$PATH:$GRAILS_HOME/bin

_grailsscripts() {
    SCRIPT_DIRS="$GRAILS_HOME/scripts ./scripts ~/.grails/scripts"
    if [ -d plugins ]
       then for PLUGIN_DIR in $(ls -d plugins/*/scripts 2> /dev/null); do
       SCRIPT_DIRS="$SCRIPT_DIRS $PLUGIN_DIR"
       done
    fi
    for D in $SCRIPT_DIRS; do
        if [ -d $D ]
	   then ls -1 $D/*.groovy 2> /dev/null | sed -E 's/(.*)\/(.*)\.groovy/\2/' | sed -E 's/([A-Z])/-\1/g' | sed -E 's/^-//' | tr "[:upper:]" "[:lower:]"
	fi
    done | sort | uniq | grep -vE "^_"
}

_grails() {
    COMPREPLY=( $(compgen -W "$(_grailsscripts)" -- ${COMP_WORDS[COMP_CWORD]}) )
}

complete -F _grails grails

# git autocomplete

source ~/.git-completion.bash